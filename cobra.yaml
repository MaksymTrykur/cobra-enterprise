namespace: cobra

db:
  defines: runnable
  inherits: mongodb/mongodb

enterprise:
  defines: runnable
  metadata:
    name: Cobra Enterprise
    description: "Cobra Enterprise, now with highscores :)"
  containers:
    app:
      build: .
      environment:
        - <- `DB_HOST=` connection-hostname("mongo") concat
        - <- `DB_PORT=` connection-port("mongo") concat
  services:
    app:
      container: app
      protocol: tcp
      port: 3001
      host-port: 3001
  connections:
    mongo:
      runnable: cobra/db
      service: mongodb
  variables:
    db-name:
      type: string
      default: mongo
      env: DB_NAME
    db-user:
      type: string
      default: mongo
    db-pass:
      type: string
      default: password

system:
  defines: group
  members:
    - cobra/db
    - cobra/enterprise
